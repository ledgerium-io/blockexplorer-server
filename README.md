# Quorum Block Explorer Backend


### Quick start

`git clone https://github.com/SkyTradeInc/quorumblockexporer.git`

`cd quorumblockexporer`

`npm i`

`touch .env`

Edit the .env and add the following fields

```
SERVER_PORT=
MONGO_USERNAME=
MONGO_PASSWORD=
MONGO_HOST=
MONGO_DB=
WEB3_HTTP=
WEB3_WS=
```

`node daemon`

To reset block data start with flag '--resync'

`node daemon --resync`

# General API Information

* The base endpoint is: http://localhost:2000
* All endpoints return either a JSON object or array.
* All time and timestamp related fields are in milliseconds.
* HTPP `4XX` return codes are used for for malformed requests; the issue is on the sender's side. issue
* HTTP `429` return code is used when breaking a request rate limit.
* HTTP `5XX` return codes are used for internal errors; the issue is on server's side.
* HTTP`200` return code signals response has been sent back to the client
* Any endpoint can return an ERROR; the error payload is as follows:
```
  {
    success: false,
    timestamp: 1560818595133,
    data: "error message"
  }
```

# API endpoints

### /ping
http://localhost:2000/ping
```
{
    success: true,
    timestamp: 1560810605811,
    data: "pong"
}
```
### /api/latestBlock
http://localhost:2000/api/latestBlock
```
{
    success: true,
    timestamp: 1560810632182,
    data: {
        transactions: [ ],
        uncles: [ ],
        validators: [
        "0xc1836760988668eea5275cd562755ec0b82cef92",
        "0xcb680d316b281aebb68e73e813b7a53ec93c8f05",
        "0x86dc44a5ae35a09a62585f2e3de29f14dce2ff2c"
        ],
        _id: "5d01e52c96124674c2cf164c",
        difficulty: 1,
        extraData: "0xd98301080c846765746889676f312e31312e3130856c696e7578000000000000f90164f854941a67eea756b9c074219dbbd1a68b7a69194126459486dc44a5ae35a09a62585f2e3de29f14dce2ff2c94c1836760988668eea5275cd562755ec0b82cef9294cb680d316b281aebb68e73e813b7a53ec93c8f05b84122b41d47c00dfdf57092f2269c1dd773e18aa3c84c4a529f69fbbea1defdb6b12b872291dd835fe52ddd8bc7deccd9ba7c0911e47236b58b0374f0a05635374701f8c9b84127ebee4aaa2c01d78a6cc049db3e2723ee56023a8116ac16009346822eddfdff0b8103009a20956f1f87d99aa54c6af7d3a6621d41ae1163e2f37b55845c658400b841e0a5c5abdd4b5e06b6e89e87a8b143eea0d98c52bd5134550e00c1cb87ea742e5125cc9b2c6bc55d13576d22ddc22dca230941e0d52e56ee63e0d7c08fb3778900b8413436a96424b61e692854492040fdd60ca404470708f5e4995e02d735efa4c89628dd84abdaf28f17d5fbb768e6ec6f0bd6a4ae598354e07932d09658c1672d3801",
        gasLimit: 9007199254740000,
        gasUsed: 0,
        hash: "0x4c3d2ba8468890cc4221d592b4c1d010190847d0e2cdfb2635685d0d82267ff6",
        logsBloom: "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
        miner: "0xc1836760988668eeA5275CD562755eC0B82CeF92",
        mixHash: "0x63746963616c2062797a616e74696e65206661756c7420746f6c6572616e6365",
        nonce: "0x0000000000000000",
        number: 14658,
        parentHash: "0x075e8064e7ae554afe4be6069f352dff9dd1c676c5035e46276ef8378ea350f7",
        receiptsRoot: "0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",
        sha3Uncles: "0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",
        size: 907,
        stateRoot: "0xf6a5ead70c9644249ee338546038c604887cf97b69769c67ac57582eb5885511",
        timestamp: 1560405289,
        totalDifficulty: 14659,
        transactionsRoot: "0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",
        __v: 0
    }
}
```

### /api/latestBlocks/:limit
http://localhost:2000/api/latestBlock/1

```
{
    success: true,
    timestamp: 1560817599208,
    data: [
        {
        transactions: [ ],
        uncles: [ ],
        validators: [
        "0xc1836760988668eea5275cd562755ec0b82cef92",
        "0xcb680d316b281aebb68e73e813b7a53ec93c8f05",
        "0x86dc44a5ae35a09a62585f2e3de29f14dce2ff2c"
        ],
        _id: "5d01e52c96124674c2cf164c",
        difficulty: 1,
        extraData: "0xd98301080c846765746889676f312e31312e3130856c696e7578000000000000f90164f854941a67eea756b9c074219dbbd1a68b7a69194126459486dc44a5ae35a09a62585f2e3de29f14dce2ff2c94c1836760988668eea5275cd562755ec0b82cef9294cb680d316b281aebb68e73e813b7a53ec93c8f05b84122b41d47c00dfdf57092f2269c1dd773e18aa3c84c4a529f69fbbea1defdb6b12b872291dd835fe52ddd8bc7deccd9ba7c0911e47236b58b0374f0a05635374701f8c9b84127ebee4aaa2c01d78a6cc049db3e2723ee56023a8116ac16009346822eddfdff0b8103009a20956f1f87d99aa54c6af7d3a6621d41ae1163e2f37b55845c658400b841e0a5c5abdd4b5e06b6e89e87a8b143eea0d98c52bd5134550e00c1cb87ea742e5125cc9b2c6bc55d13576d22ddc22dca230941e0d52e56ee63e0d7c08fb3778900b8413436a96424b61e692854492040fdd60ca404470708f5e4995e02d735efa4c89628dd84abdaf28f17d5fbb768e6ec6f0bd6a4ae598354e07932d09658c1672d3801",
        gasLimit: 9007199254740000,
        gasUsed: 0,
        hash: "0x4c3d2ba8468890cc4221d592b4c1d010190847d0e2cdfb2635685d0d82267ff6",
        logsBloom: "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
        miner: "0xc1836760988668eeA5275CD562755eC0B82CeF92",
        mixHash: "0x63746963616c2062797a616e74696e65206661756c7420746f6c6572616e6365",
        nonce: "0x0000000000000000",
        number: 14658,
        parentHash: "0x075e8064e7ae554afe4be6069f352dff9dd1c676c5035e46276ef8378ea350f7",
        receiptsRoot: "0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",
        sha3Uncles: "0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",
        size: 907,
        stateRoot: "0xf6a5ead70c9644249ee338546038c604887cf97b69769c67ac57582eb5885511",
        timestamp: 1560405289,
        totalDifficulty: 14659,
        transactionsRoot: "0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",
        __v: 0
        }
        ]
}

```

### /api/latestTx/:limit
http://localhost:2000/api/latestTx/1


```
{
    success: true,
    timestamp: 1560817650693,
    data: [
        {
        _id: "5d01eb1f77e61f7927861835",
        blockHash: "0x2b64deccebae2a7a2abca056114797516e08018f410e7aeac0a60d83649d1ac0",
        blockNumber: 14599,
        from: "0x1a67eeA756B9c074219dBBd1a68b7A6919412645",
        gas: 4700000,
        gasPrice: 2000000000,
        hash: "0x85a16d46df13f5e3576ecc187e08aaa65a28ce2882cdb996a0342f14b7f0075b",
        input: "0x186047b000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000000000000000016000000000000000000000000000000000000000000000000000000000000001a000000000000000000000000000000000000000000000000000000000000001e000000000000000000000000000000000000000000000000000000000000002200000000000000000000000000000000000000000000000000000000000000280000000000000000000000000000000000000000000000000000000000000001876616c696461746f722d6465766e65746164646f6e3031300000000000000000000000000000000000000000000000000000000000000000000000000000001876616c696461746f722d6465766e65746164646f6e30313000000000000000000000000000000000000000000000000000000000000000000000000000000008506565724e6f6465000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000831302e382e382e3100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000053537313030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002a3078306562306538666462383531633637656434623433623561316530663166633531333232323739300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000806237376135323236343963353866346237323137313436333135346534303335663430653839386632656362326539313033383732323536313365613132666664343664393433363563326637623461386538353638663666636631343633373535356637613664636164646662333766373065613366303537383939303431",
        nonce: 20,
        to: "0x0000000000000000000000000000000000002023",
        transactionIndex: 0,
        value: 0,
        v: "0x1c",
        r: "0xae01020d98961868315f308949a652a8cb060e28b19a4457409435366718883b",
        s: "0x118b1b2996d0782231e05e5dba113d04c2488118c4221e9dc839d23082d18028",
        __v: 0
      }
    ]
}
```

### /api/address/:address

http://localhost:2000/api/address/0xxxxxxx

### /api/tx/:hash
http://localhost:2000/api/tx/0x85a16d46df13f5e3576ecc187e08aaa65a28ce2882cdb996a0342f14b7f0075b

```
{
  success: true,
  timestamp: 1560817697349,
  data: {
      _id: "5d01eb1f77e61f7927861835",
      blockHash: "0x2b64deccebae2a7a2abca056114797516e08018f410e7aeac0a60d83649d1ac0",
      blockNumber: 14599,
      from: "0x1a67eeA756B9c074219dBBd1a68b7A6919412645",
      gas: 4700000,
      gasPrice: 2000000000,
      hash: "0x85a16d46df13f5e3576ecc187e08aaa65a28ce2882cdb996a0342f14b7f0075b",
      input: "0x186047b000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000000000000000016000000000000000000000000000000000000000000000000000000000000001a000000000000000000000000000000000000000000000000000000000000001e000000000000000000000000000000000000000000000000000000000000002200000000000000000000000000000000000000000000000000000000000000280000000000000000000000000000000000000000000000000000000000000001876616c696461746f722d6465766e65746164646f6e3031300000000000000000000000000000000000000000000000000000000000000000000000000000001876616c696461746f722d6465766e65746164646f6e30313000000000000000000000000000000000000000000000000000000000000000000000000000000008506565724e6f6465000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000831302e382e382e3100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000053537313030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002a3078306562306538666462383531633637656434623433623561316530663166633531333232323739300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000806237376135323236343963353866346237323137313436333135346534303335663430653839386632656362326539313033383732323536313365613132666664343664393433363563326637623461386538353638663666636631343633373535356637613664636164646662333766373065613366303537383939303431",
      nonce: 20,
      to: "0x0000000000000000000000000000000000002023",
      transactionIndex: 0,
      value: 0,
      v: "0x1c",
      r: "0xae01020d98961868315f308949a652a8cb060e28b19a4457409435366718883b",
      s: "0x118b1b2996d0782231e05e5dba113d04c2488118c4221e9dc839d23082d18028",
      __v: 0
  }
}
```

### /api/block/:number



### /api/balance/:address

### /api/peers
http://localhost:2000/api/peers

```
{
    success: true,
    timestamp: 1560817433799,
    data: 9
}
```

### /api/nodes
http://localhost:2000/api/nodes

```
{
    success: true,
    timestamp: 1560817457031,
    data: [
        {
        id: "2ff2174822a779671b2873cbb390ad069d2683c94c565b73dd578fd7e13920b487ba4a7aefa802724edf324a4ba20ab0114f0a6c1c5d9c6b4abf76bc022000ef",
        name: "Geth/validator-cn-hk-app010/v1.8.12-stable-62a3b6c1(quorum-v2.2.1)/linux-amd64/go1.11.5",
        caps: [
        "istanbul/64"
        ],
        network: {
        localAddress: "xxx.xxx.xxx.xxx:xxxxx",
        remoteAddress: "xxx.xxx.xxx.xxx:xxxxx",
        inbound: true,
        trusted: false,
        static: false
        },
        protocols: {
        istanbul: {
        version: 64,
        difficulty: 1,
        head: "0xff950b5dc6d5309153d7f5a38055117be753ee54d30a8b5c3b22f66f663c42b8"
        }
      }
    }]
}
```
